import{r as a,j as e,a as L}from"./app-BhP5LsBi.js";import{N as Y,a as G}from"./NavBar-DLZuDC1_.js";import{c as I}from"./checkstatus-Bhh75rH1.js";import{S as R,a as V,T as z,P as K}from"./tracks-CmOGYpUb.js";import{C as H,a as k,N as W,P as J,L as Q}from"./PlatformDropdown-BIZUZDDY.js";/* empty css            */import"./createLucideIcon-DXr1tZ9C.js";import"./music-diwl4NDn.js";import"./proxy-Ch-9CurW.js";import"./loader-circle-DGxwYFzy.js";const U=({error:s,onDismiss:l,duration:t=2e3})=>(a.useEffect(()=>{const i=setTimeout(()=>{l()},t);return()=>clearTimeout(i)},[l,t]),e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(H,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 font-medium",children:s})]})})),X=[{key:"spotify",label:"Spotify",icon:k,gradient:"from-green-500 to-green-600"},{key:"youtube",label:"YouTube",icon:k,gradient:"from-red-500 to-red-600"}],Z=s=>X.find(l=>l.key===s),ee=({platform:s})=>{const l=Z(s);return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"w-16 h-16 text-purple-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-2 text-purple-900 dark:text-purple-100",children:"No Playlists Found"}),e.jsxs("p",{className:"text-purple-600/80 dark:text-purple-400/80",children:["You don't have any playlists on ",l?.label," yet"]})]})},te=({isOpen:s,title:l,message:t,confirmText:i,cancelText:c,onConfirm:n,onCancel:x,disabled:u=!1})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white/95 dark:bg-neutral-900/95 backdrop-blur-xl rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-900 dark:text-purple-100 mb-3",children:l}),e.jsx("p",{className:"text-purple-700 dark:text-purple-300 mb-6",children:t}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:x,disabled:u,className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c}),e.jsx("button",{onClick:n,disabled:u,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i})]})]})}):null,se=[{key:"spotify",label:"Spotify",icon:()=>e.jsx("span",{children:"ðŸŽµ"}),gradient:"from-green-500 to-green-600"},{key:"youtube",label:"YouTube",icon:()=>e.jsx("span",{children:"â–¶"}),gradient:"from-red-500 to-red-600"}],re=s=>se.find(l=>l.key===s),le=({playlist:s,platform:l,isSelected:t,onSelect:i,onView:c})=>{const n=re(l),x=u=>{u.target.closest(".select-checkbox")?i(s.id):c(s.id)};return e.jsxs("div",{className:`group relative flex flex-col overflow-hidden rounded-2xl border-2 transition-all duration-300 cursor-pointer backdrop-blur-xl ${t?"bg-gradient-to-br from-purple-100/80 to-purple-200/60 dark:from-purple-900/80 dark:to-purple-800/40 border-purple-400 dark:border-purple-500 shadow-xl":"bg-gradient-to-br from-white/80 to-purple-50/60 dark:from-neutral-900/80 dark:to-purple-950/40 border-purple-200/50 dark:border-purple-800/50 shadow-lg hover:shadow-2xl"}`,onClick:x,children:[e.jsx("div",{className:"absolute inset-0 opacity-5",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400 to-purple-600 transform rotate-12 scale-150"})}),e.jsx("div",{className:"absolute top-3 right-3 z-10 select-checkbox",children:e.jsx("button",{onClick:u=>{u.stopPropagation(),i(s.id)},className:`w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${t?"bg-purple-600 border-purple-600 text-white":"bg-white/80 dark:bg-neutral-800/80 border-purple-300 dark:border-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/50"}`,children:t?e.jsx(R,{className:"w-4 h-4"}):e.jsx(V,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})})}),e.jsxs("div",{className:"relative p-5 flex-grow flex flex-col",children:[e.jsx("div",{className:"mb-4",children:s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full aspect-square object-cover rounded-xl shadow-md"}):e.jsx("div",{className:"w-full aspect-square bg-gradient-to-br from-purple-200 to-purple-300 dark:from-purple-800 dark:to-purple-900 rounded-xl flex items-center justify-center",children:e.jsx(k,{className:"w-12 h-12 text-purple-600 dark:text-purple-400"})})}),e.jsxs("div",{className:"space-y-2 flex-grow",children:[e.jsx("h3",{className:`text-lg font-bold line-clamp-2 transition-colors ${t?"text-purple-800 dark:text-purple-200":"text-purple-900 dark:text-purple-100 group-hover:text-purple-700 dark:group-hover:text-purple-300"}`,children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-purple-700/80 dark:text-purple-300/80 line-clamp-2",children:s.description})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200/50 dark:border-purple-800/50 text-xs",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n&&e.jsx("div",{className:`p-1 rounded-md bg-gradient-to-br ${n.gradient}`,children:e.jsx(n.icon,{})}),e.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:s.track_count?`${s.track_count} tracks`:"Playlist"})]}),s.owner&&e.jsxs("span",{className:"text-purple-500/70 dark:text-purple-500/70 truncate",children:["by ",s.owner]})]})})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"})]})},ae=({playlists:s,platform:l,selectedPlaylists:t,onSelectPlaylist:i,onViewPlaylist:c})=>e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((n,x)=>e.jsx(le,{playlist:n,platform:l,isSelected:t.includes(n.id),onSelect:i,onView:c},`${n.id}-${x}`))}),ge=()=>{const[s,l]=a.useState({}),[t,i]=a.useState(""),[c,n]=a.useState([]),[x,u]=a.useState(!0),[j,S]=a.useState(!1),[y,h]=a.useState(null),[C,N]=a.useState(!0),[$,T]=a.useState(null),[p,v]=a.useState([]),[O,w]=a.useState(!1),[_,M]=a.useState(!1),[F,P]=a.useState(null),[d,E]=a.useState({offset:0,pageToken:null,hasMore:!1,hasPrevious:!1,total:0});a.useEffect(()=>{(async()=>{try{const o=await I();if(o&&o.connected_platforms){l(o.connected_platforms);const m=Object.keys(o.connected_platforms).filter(f=>o.connected_platforms[f]);m.length>0&&i(m[0])}}catch(o){console.error("Error loading connected platforms:",o),h("Failed to load connected platforms")}finally{u(!1)}})()},[]),a.useEffect(()=>{t&&g(t)},[t]);const q=r=>{i(r),N(!0),T(null),E({offset:0,pageToken:null,hasMore:!1,hasPrevious:!1,total:0})},g=async(r,o,m)=>{S(!0),h(null);try{let f=`/playlists/${r}?limit=20`;r==="spotify"&&o!==void 0?f+=`&offset=${o}`:r==="youtube"&&m&&(f+=`&page_token=${m}`);const b=(await L.get(f)).data;n(b.data||[]),E({offset:b.offset||0,pageToken:b.next_page_token||null,hasMore:b.has_more||!1,hasPrevious:b.has_previous||!1,total:b.total||0})}catch(f){console.error(`Error fetching ${r} playlists:`,f),h(`Failed to fetch ${r} playlists`),n([])}finally{S(!1)}},A=()=>{t==="spotify"&&d.offset!==null?g(t,d.offset+20):t==="youtube"&&d.pageToken&&g(t,void 0,d.pageToken)},B=()=>{t==="spotify"&&d.offset!==null&&d.offset>0?g(t,Math.max(0,d.offset-20)):t==="youtube"&&d.pageToken&&g(t)};if(x)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});const D=Object.keys(s).filter(r=>s[r]);return e.jsxs(e.Fragment,{children:[e.jsx(Y,{items:G}),e.jsxs("div",{className:"w-full max-w-6xl mx-auto p-4 md:p-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-purple-400 bg-clip-text text-transparent",children:"Your Playlists"}),e.jsx("p",{className:"text-lg text-purple-600/80 dark:text-purple-400/80 font-medium",children:"View and manage your playlists across connected platforms"})]}),D.length===0?e.jsx(W,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsx(J,{connectedPlatformKeys:D,selectedPlatform:t,onSelectPlatform:q})}),j&&e.jsx(Q,{}),y&&!j&&e.jsx(U,{error:y,onDismiss:()=>h(null)}),F&&e.jsx("div",{className:"mb-4 p-4 bg-green-100 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"text-green-800 dark:text-green-200 font-medium",children:F})]})}),!j&&!y&&c.length===0&&t&&e.jsx(ee,{platform:t}),!j&&!y&&c.length>0&&C?e.jsxs(e.Fragment,{children:[p.length>0&&e.jsxs("div",{className:"mb-6 flex items-center justify-between bg-white/80 dark:bg-neutral-900/80 backdrop-blur-xl border border-purple-200/50 dark:border-purple-800/50 rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-purple-900 dark:text-purple-100 font-medium",children:[p.length," playlist",p.length!==1?"s":""," selected"]}),e.jsx("button",{onClick:()=>v([]),className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200 text-sm underline",children:"Clear selection"})]}),e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors shadow-lg",children:[e.jsx(z,{className:"w-4 h-4"}),"Delete Selected"]})]}),e.jsx(ae,{playlists:c,platform:t,selectedPlaylists:p,onSelectPlaylist:r=>{v(o=>o.includes(r)?o.filter(m=>m!==r):[...o,r])},onViewPlaylist:r=>{T(r),N(!1)}}),c.length>0&&e.jsxs("div",{className:"mt-8 flex justify-center items-center gap-4",children:[e.jsx("button",{onClick:B,disabled:!d.hasPrevious,className:"px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-purple-900 dark:text-purple-100",children:["Page ",Math.floor(d.offset/20)+1]}),e.jsx("button",{onClick:A,disabled:!d.hasMore,className:"px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]}):$&&!C&&e.jsx("div",{children:e.jsx(K,{playlistId:$,platformId:t,onHide:()=>N(!0)})}),e.jsx(te,{isOpen:O,title:"Delete Playlists",message:`Are you sure you want to delete ${p.length} playlist${p.length!==1?"s":""}? This action cannot be undone.`,confirmText:_?"Deleting...":"Delete",cancelText:"Cancel",onConfirm:async()=>{M(!0),h(null),P(null);try{await L.delete(`/playlists/${t}`,{data:{playlist_ids:p}}),await g(t),v([]),w(!1),P(`Successfully deleted ${p.length} playlist${p.length!==1?"s":""}`),setTimeout(()=>P(null),3e3)}catch(r){console.error("Error deleting playlists:",r),h("Failed to delete playlists")}finally{M(!1)}},onCancel:()=>w(!1),disabled:_})]})]})]})};export{ge as default};
