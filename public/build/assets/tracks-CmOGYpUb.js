import{r as o,j as e,a as M}from"./app-BhP5LsBi.js";import{c as m}from"./createLucideIcon-DXr1tZ9C.js";import{M as T}from"./music-diwl4NDn.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],P=m("SquareCheckBig",_);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],$=m("Square",C);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],z=m("Trash2",E),D=({playlistId:c,platformId:r,onHide:k})=>{const[b,j]=o.useState([]),[y,p]=o.useState(!0),[f,g]=o.useState(null),[l,u]=o.useState([]),[N,x]=o.useState(!1),[s,w]=o.useState({offset:0,pageToken:null,hasMore:!1,hasPrevious:!1,total:0}),i=async(t,d)=>{try{p(!0);let a=`/playlists/${r}/${c}/tracks?limit=20`;r==="spotify"&&t!==void 0?a+=`&offset=${t}`:r==="youtube"&&d&&(a+=`&page_token=${d}`);const n=await fetch(a);if(!n.ok)throw new Error("Failed to fetch tracks");const h=await n.json();j(h.tracks),w({offset:t||0,pageToken:d||null,hasMore:h.tracks.length===20,hasPrevious:(t||0)>0,total:h.total||0}),p(!1)}catch{g("Failed to load tracks"),p(!1)}};o.useEffect(()=>{i()},[c,r]);const v=()=>{r==="spotify"&&s.offset!==null?i(s.offset+20):r==="youtube"&&s.pageToken&&i(void 0,s.pageToken)},S=()=>{r==="spotify"&&s.offset!==null&&s.offset>0?i(Math.max(0,s.offset-20)):r==="youtube"&&s.pageToken&&i()};return y?e.jsx("div",{className:"playlist-tracks w-full max-w-4xl mx-auto p-4 md:p-6",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"Loading tracks..."})]})})}):f?e.jsx("div",{className:"playlist-tracks w-full max-w-4xl mx-auto p-4 md:p-6",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 dark:text-red-400 mb-2",children:"⚠️"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 font-medium",children:f})]})})}):e.jsxs("div",{className:"playlist-tracks w-full max-w-4xl mx-auto p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-purple-400 bg-clip-text text-transparent",children:"Playlist Tracks"}),e.jsx("button",{onClick:k,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-500 text-white font-semibold rounded-xl hover:from-purple-700 hover:to-purple-600 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Hide"})]}),l.length>0&&e.jsxs("div",{className:"mb-6 flex items-center justify-between bg-white/80 dark:bg-neutral-900/80 backdrop-blur-xl border border-purple-200/50 dark:border-purple-800/50 rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-purple-900 dark:text-purple-100 font-medium",children:[l.length," track",l.length!==1?"s":""," selected"]}),e.jsx("button",{onClick:()=>u([]),className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200 text-sm underline",children:"Clear selection"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors shadow-lg",children:[e.jsx(z,{className:"w-4 h-4"}),"Delete Selected"]})]}),e.jsx("div",{className:"tracks-list space-y-6",children:b.map(t=>e.jsxs("div",{className:"track-item relative flex items-center gap-4 p-4 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-xl border border-purple-200/50 dark:border-purple-800/50 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"absolute top-3 right-3 z-10 select-checkbox",children:e.jsx("button",{onClick:d=>{d.stopPropagation(),u(a=>a.includes(t.id)?a.filter(n=>n!==t.id):[...a,t.id])},className:`w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${l.includes(t.id)?"bg-purple-600 border-purple-600 text-white":"bg-white/80 dark:bg-neutral-800/80 border-purple-300 dark:border-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/50"}`,children:l.includes(t.id)?e.jsx(P,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})})}),e.jsx("div",{className:"w-16 h-16 flex-shrink-0",children:t.image?e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover rounded-xl shadow-md"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-200 to-purple-300 dark:from-purple-800 dark:to-purple-900 rounded-xl flex items-center justify-center",children:e.jsx(T,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})})}),e.jsxs("div",{className:"track-info flex-grow",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100 line-clamp-1",children:t.title}),e.jsx("p",{className:"text-purple-700 dark:text-purple-300 line-clamp-1",children:t.artist}),e.jsx("p",{className:"text-purple-600/80 dark:text-purple-400/80 text-sm line-clamp-1",children:t.album}),e.jsxs("p",{className:"text-purple-500/70 dark:text-purple-500/70 text-sm",children:[t.duration_ms&&Math.floor(t.duration_ms/6e4),":",(t.duration_ms%6e4/1e3).toFixed(0).padStart(2,"0")]})]})]},t.id))}),b.length>0&&e.jsxs("div",{className:"mt-8 flex justify-center items-center gap-4",children:[e.jsx("button",{onClick:S,disabled:!s.hasPrevious,className:"px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-purple-900 dark:text-purple-100",children:["Page ",Math.floor(s.offset/20)+1]}),e.jsx("button",{onClick:v,disabled:!s.hasMore,className:"px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Next"})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white/95 dark:bg-neutral-900/95 backdrop-blur-xl rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-900 dark:text-purple-100 mb-3",children:"Delete Tracks"}),e.jsxs("p",{className:"text-purple-700 dark:text-purple-300 mb-6",children:["Are you sure you want to delete ",l.length," track",l.length!==1?"s":""," from this playlist? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{try{await M.delete(`/${r}/${c}/tracks`,{data:{track_ids:l}}),i(),u([]),x(!1)}catch(t){console.error("Error deleting tracks:",t),g("Failed to delete tracks")}},className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})},V=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));export{D as P,P as S,z as T,$ as a,V as t};
